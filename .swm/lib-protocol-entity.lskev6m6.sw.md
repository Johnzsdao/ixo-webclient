---
id: lskev6m6
title: lib-protocol-entity
file_version: 1.1.3
app_version: 1.15.0
---

StargateSigning function for updating entity status, startDate, endDate, credentials
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/lib/protocol/entity.ts
<!-- collapsed -->

```typescript
184    export const UpdateEntity = async (
185      client: SigningStargateClient,
186      signer: TSigner,
187      payload: Partial<MsgUpdateEntity>,
188    ) => {
189      const queryClient = await createQueryClient(RPC_ENDPOINT!)
190      await sleepByLimiter()
191      const entity = await queryClient.ixo.entity.v1beta1.entity({
192        id: payload?.id || signer.address,
193      })
194      if (!entity.entity) {
195        throw new Error('Entity not found')
196      }
197    
198      const message = {
199        typeUrl: '/ixo.entity.v1beta1.MsgUpdateEntity',
200        value: ixo.entity.v1beta1.MsgUpdateEntity.fromPartial({
201          id: payload?.id || signer.did,
202          entityStatus: payload?.entityStatus === undefined ? entity.entity.status : payload?.entityStatus,
203          startDate: payload?.startDate || entity.entity.startDate,
204          endDate: payload?.endDate || entity.entity.endDate,
205          credentials: payload?.credentials || entity.entity.credentials,
206          controllerDid: signer.did,
207          controllerAddress: signer.address,
208        }),
209      }
210    
211      console.log('UpdateEntity', { message })
212      await sleepByLimiter()
213      const response: DeliverTxResponse = await client.signAndBroadcast(signer.address, [message], fee)
214      console.log('UpdateEntity', { response })
215      return response
216    }
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBaXhvLXdlYmNsaWVudCUzQSUzQWl4b2ZvdW5kYXRpb24=/docs/lskev6m6).
